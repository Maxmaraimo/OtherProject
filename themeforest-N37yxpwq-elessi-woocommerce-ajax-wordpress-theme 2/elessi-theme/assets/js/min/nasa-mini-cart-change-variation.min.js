var ns_minicart_change_html=[];jQuery(document).ready(function(i){"use strict";i("body").on("click",".nasa-change_variation_mini_cart .mini-cart-item dl.variation",function(a){if(nasa_quick_viewimg=!0,i("body").trigger("nasa_append_style_off_canvas"),"undefined"!=typeof nasa_params_quickview&&"undefined"!=typeof nasa_params_quickview.wc_ajax_url){var t=nasa_params_quickview.wc_ajax_url.toString().replace("%%endpoint%%","nasa_quick_view"),n=i(this),e=i(n).attr("data-product_type");if("woosb"===e&&"undefined"!=typeof i(n).attr("data-href"))window.location.href=i(n).attr("data-href");else{var r=i(n).parents(".nasa-static-sidebar"),o=i(n).parents(".mini-cart-item"),s="1"===i(n).attr("data-from_wishlist")?"1":"0",d=i(o).attr("data-id-product"),c=i(o).find(".remove_from_cart_button ").attr("data-cart_item_key"),l=i(r).find(".nasa-minicart-footer"),p=i(o).find(".quantity-wrap .quantity .qty").attr("value"),f=i(o).find(".nasa-image-cart-item img"),g={product:d,nasa_wishlist:s},u='<div class="ext-node mini-cart-change-variation"></div>',v='<a href="javascript:void(0);" title="Close" class="nasa-close-node nasa-stclose" rel="nofollow"></a>';if(f.length)var m=i(f).outerWidth(),h=i(f).outerHeight();g.quickview="popup",i(l).find(".ext-nodes-wrap").length?i(l).find(".ext-nodes-wrap .mini-cart-change-variation").length<=0&&i(l).find(".ext-nodes-wrap").append(u):i(l).append('<div class="ext-nodes-wrap">'+u+"</div>"),i(r).hasClass("ext-loading")||i(r).addClass("ext-loading"),i(r).find(".close-nodes").length<1&&i(r).append('<a href="javascript:void(0);" class="close-nodes"></a>');var _=!0,b=i(l).find(".ext-nodes-wrap .mini-cart-change-variation"),w=v+'<div class="ns-mask-load nasa-crazy-load qv-loading padding-left-35 mobile-padding-left-20 mobile-padding-right-20 padding-right-35"><div class="product-quickview-img-wrap nasa-flex align-start"><div class="product-quickview-img margin-bottom-20" style="height:'+h+"px; width:"+m+'px;"></div><div class="nasa-quickview-fog"><div class="qv-crazy-info"><span class="info-1"></span><span class="info-2 margin-top-20"></span></div></div></div><div class="nasa-quickview-fog"><div class="qv-crazy-info"><span class="info-3 margin-top-20"></span><span class="info-6-2 margin-top-20"></span><span class="info-3 margin-top-20"></span><span class="info-6-2 margin-top-20"></span><span class="info-3 margin-top-20"></span><span class="info-7 nasa-flex margin-top-20"><span class="info-7-1"></span><span class="info-7-2"></span></span></div></div></div>';if(i(b).html(w),setTimeout(function(){i(b).addClass("active")},100),"undefined"!=typeof ns_minicart_change_html[d]&&(_=!1),_)i.ajax({url:t,type:"post",dataType:"json",data:g,cache:!1,beforeSend:function(){"undefined"!=typeof setMaxHeightQVPU&&clearInterval(setMaxHeightQVPU)},success:function(a){ns_minicart_change_html[d]=a,i(b).html(v+'<div class="product-lightbox">'+a.content+"</div>"),i(b).find(".product-lightbox .nasa-product-gallery-lightbox").css({"min-height":h}),i("body").trigger("init-mini-cart-update-form",[b,p,c,n])}});else{var y=ns_minicart_change_html[d];i(b).html(v+'<div class="product-lightbox">'+y.content+"</div>"),i(b).find(".product-lightbox .nasa-product-gallery-lightbox").css({"min-height":h}),i("body").trigger("init-mini-cart-update-form",[b,p,c,n])}}}a.preventDefault()}),i("body").on("init-mini-cart-update-form",function(a,t,n,e,r){if(i("body").trigger("nasa_init_product_gallery_lightbox"),i(t).find(".variations_form .quantity .qty").length&&i(t).find(".variations_form .quantity .qty").val(n).attr({"data-old":n-1}),i(t).find(".variations_form .ns-single-add-btn").length){var o=i(t).parents(".nasa-static-sidebar").find(".nasa-minicart-items").attr("data-text"),s=i(t).find(".variations_form .ns-info-variants");i(s).length&&i(s).replaceWith(i(s).html()),i(t).find(".variations_form .ns-single-add-btn").attr({"data-quantity":n,"data-cart_item_key":e}).addClass("btn-add-from-minicart").text(o)}var d=[i(t).find(".product-lightbox .product-info .product_title").clone().addClass("fs-16"),i(t).find(".product-lightbox .product-info .nasa-single-product-price").clone(),i(t).find(".variations_form .woocommerce-variation").clone()],c=i(t).find(".product-lightbox .product-info .nasa-variation-bulk-dsct");i(t).find(".variations_form .variations").append(c),i(t).find(".product-lightbox .product-quickview-img .ns-price").length<=0&&i(t).find(".product-lightbox .product-quickview-img").append('<div class="ns-price flex-column nasa-flex align-start"></div>'),i(t).find(".product-lightbox .product-quickview-img .ns-price").append(d),i(t).find(".product-lightbox .product-quickview-img").removeClass("padding-left-0 padding-right-0"),setTimeout(function(){i('form.cart input[name="quantity"]').length&&i(".product-lightbox .ev-dsc-qty").length&&i('form.cart input[name="quantity"]').trigger("change")},10),i("body").trigger("before_init_variations_form");var l=i(".mini-cart-change-variation .product-lightbox").find(".variations_form");i(l).length&&(i(l).find(".single_variation_wrap").hide(),i(l).each(function(){var a=i(this);i("body").trigger("init_quickview_variations_form",[a]),i(a).find("select").trigger("change"),i(a).find('.variations select option[selected="selected"]').length&&i(a).find(".variations .reset_variations").css({visibility:"visible"}).show()})),i(r).find("dd").each(function(){var a=i(this),n=i(a).prev().text().replace(" ","-").replace(":","").toLowerCase(),e=i(a).find("p").text();if(i(t).find(".variations_form .variations").length){var r=i(t).find(".variations_form .variations"),o=i(r).find('td.value .nasa-attr-ux_wrap[data-attribute_name="attribute_pa_'+n+'"] a[data-value="'+e.replace(" ","-").toLowerCase()+'"]');i(o).length?i(o).hasClass("selected")||i(o).trigger("click"):(o=i(r).find('td.value select[data-attribute_name="attribute_'+n+'"]'),i(o).val(e))}}),i("body").trigger("nasa_changed_gallery_variable_quickview"),i("body").trigger("nasa_after_quickview")}),i("body").on("nasa_changed_gallery_variable_quickview",function(){var a=i("#cart-sidebar .ext-nodes-wrap .mini-cart-change-variation");if(i(a).find(".product-quickview-img .nasa-slick-slider").length){var t=i(a).find(".product-quickview-img .nasa-slick-slider img:first-child").clone().attr({"class":"main-img",style:"width:100%;"});i(a).find(".product-quickview-img .product-img .main-img").length<=0?i(a).find(".product-quickview-img .product-img").prepend(t):i(a).find(".product-quickview-img .product-img .main-img").replaceWith(t)}}),i("body").on("ns_bulk_discount_changed",function(){var a=i("#cart-sidebar .ext-nodes-wrap .mini-cart-change-variation");i(a).length&&i("body").trigger("update-price-stock-pos",[a])}),i("body").on("update-price-stock-pos",function(a,t){setTimeout(function(){var a=i(t).find(".variations_form .woocommerce-variation").clone();i(t).find(".product-info .price.nasa-bulk-price").length?(a=i(t).find(".product-info .price.nasa-bulk-price").html(),i(t).find(".product-lightbox .product-quickview-img .ns-price .woocommerce-variation .woocommerce-variation-price").html('<span class="price">'+a+"</span>"),i(t).find(".product-lightbox .product-quickview-img .ns-price .woocommerce-variation").removeAttr("style")):i(t).find(".product-lightbox .product-quickview-img .ns-price .woocommerce-variation").replaceWith(a);var n=i(t).find(".product-lightbox .product-quickview-img .ns-price .nasa-single-product-price");""==i(a).find(".woocommerce-variation-price").html()||i(t).find(".variations_form .btn-add-from-minicart").hasClass("disabled")?i(n).show():i(n).hide()},200)})});